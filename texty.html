<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Moje portfolio a webové stránky">
    <meta name="keywords" content="portfolio, web, texty, o mně">
    <title>Portfolio | Michal Vítek</title>
    <link rel="icon" type="image/png" href="ikony/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="logo"><a href="index.html">Michal Vítek</a></div>
      <nav>
        <ul class="menu">
          <li><a href="index.html">Domů</a></li>
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="texty.html" class="active">Texty</a></li>
          <li><a href="o-mne.html">O mně</a></li>
        </ul>
        <div class="burger" id="burger">
          <div></div><div></div><div></div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Sekce texty -->
  <section class="texts">
    <div class="text-filters">
      <button class="filter-btn active" data-filter="poezie">Poezie</button>
      <button class="filter-btn" data-filter="proza">Próza</button>
    </div>
    <div class="text-container" id="textContainer"></div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Michal Vítek</p>
  </footer>

  <!-- Načtení JS souborů -->
  <script src="texty/poezie.js"></script>
  <script src="texty/proza.js"></script>

  <script>
    // ========== BURGER MENU ==========
    const burger = document.getElementById('burger');
    const menu = document.querySelector('.menu');
    burger.addEventListener('click', () => menu.classList.toggle('show'));

    // ========== ZOBRAZENÍ TEXTŮ ==========
    const textContainer = document.getElementById('textContainer');
    const filterButtons = document.querySelectorAll('.filter-btn');

    let currentCategory = 'poezie';
    let data = [];

    // Načte texty podle zvolené kategorie
    function loadTexts(category) {
      textContainer.innerHTML = '';

      if (category === 'poezie' && typeof poezie !== 'undefined') {
        data = poezie;
      } else if (category === 'proza' && typeof proza !== 'undefined') {
        data = proza;
      } else {
        textContainer.innerHTML = '<p>Žádné texty k zobrazení.</p>';
        return;
      }

      data.forEach(item => {
        // kratší ukázka u prózy
        const previewLength = category === 'proza' ? 2 : 4;
        const excerpt = item.text.split('\n').slice(0, previewLength).join('<br>'); 

        const textEl = document.createElement('div');
        textEl.classList.add('text-item');
        textEl.innerHTML = `
          <h2>${item.nazev}</h2>
          <p>${excerpt}...</p>
          <button class="read-more"> číst celé &gt;</button>
        `;

        // Po kliknutí na "Číst celé"
        textEl.querySelector('.read-more').addEventListener('click', () => {
          textEl.innerHTML = `
            <h2>${item.nazev}</h2>
            <p>${item.text.replace(/\n/g, '<br>')}</p>
            <button class="back">&lt; zpět</button>
          `;
          textEl.querySelector('.back').addEventListener('click', () => loadTexts(category));
        });

        textContainer.appendChild(textEl);
      });
    }

    // Přepínání mezi kategoriemi
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.dataset.filter;
        loadTexts(currentCategory);
      });
    });

    // Načti výchozí kategorii (poezie)
    document.addEventListener('DOMContentLoaded', () => loadTexts('poezie'));
  </script>
</body>
</html>
